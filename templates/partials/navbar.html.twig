<nav class="bg-white border-b border-blue-300 shadow-sm sticky top-0 z-50">
	<div
		class="max-w-360 mx-auto px-4 py-3 flex items-center justify-between">
		{# Logo #}
		<a href="/" class="text-2xl font-bold text-blue-600">
			TicketPro
		</a>

		{# Desktop Links #}
		<div class="hidden md:flex items-center gap-6">
			<a href="/" class="hover:text-blue-600 transition">Home</a>
			<a href="/dashboard" class="hover:text-blue-600 transition">Dashboard</a>
			<a href="/tickets" class="hover:text-blue-600 transition">Tickets</a>
		</div>

		{# Auth Buttons #}
		<div
			id="auth-buttons" class="hidden md:flex items-center gap-4">
			<!-- Logged In -->
			<div id="user-links" class="hidden">
				<button class="logout-btn bg-red-500 hover:bg-red-600 text-white font-medium px-4 py-2 rounded-md text-sm">
					Logout
				</button>
			</div>
			<!-- Logged Out -->
			<div id="guest-links" class="space-x-4">
				<a href="/auth/login" class="text-blue-600 border border-blue-600 px-3 py-1 rounded-md hover:bg-blue-600 hover:text-white transition">
					Login
				</a>
				<a href="/auth/register" class="bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 transition">
					Register
				</a>
			</div>
		</div>

		{# Mobile Menu Button #}
		<button id="menu-toggle" class="md:hidden text-gray-700 text-3xl focus:outline-none">
			â˜°
		</button>
	</div>

	{# Mobile Menu (Hidden by Default, shown via JS toggle) #}
	<div id="mobile-menu" class="hidden md:hidden bg-white border-t border-blue-300">
		<div class="flex flex-col p-4 space-y-3 text-center">
			<a href="/" class="hover:text-blue-600 transition">Home</a>
			<a href="/dashboard" class="hover:text-blue-600 transition">Dashboard</a>
			<a href="/tickets" class="hover:text-blue-600 transition">Tickets</a>

			<!-- User -->
			<div id="mobile-user-links" class="hidden">
				<button class="logout-btn inline-flex items-center justify-center w-full px-4 py-2 rounded-lg bg-red-600 text-white font-medium hover:bg-red-700 transition">
					Logout
				</button>
			</div>
			<div id="mobile-guest-links" class="flex flex-col gap-3">
				<a href="/auth/login" class="inline-flex items-center justify-center px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition">
					Login
				</a>
				<a href="/auth/register" class="inline-flex items-center justify-center px-4 py-2 rounded-lg border border-blue-600 bg-white text-blue-600 font-medium hover:bg-blue-50 transition">
					Register
				</a>
			</div>
		</div>
	</div>
</nav>

<script type="module">
	import {isAuthenticated} from "/public/session.js"

document.addEventListener("DOMContentLoaded", () => {
const session = JSON.parse(localStorage.getItem("ticketapp_user"));
const now = Date.now();


// Check if valid session exists
const isLoggedIn = isAuthenticated();

// Desktop
const guestLinks = document.getElementById("guest-links");
const userLinks = document.getElementById("user-links");

// Mobile
const mobileGuest = document.getElementById("mobile-guest-links");
const mobileUser = document.getElementById("mobile-user-links");

if (isLoggedIn) {
guestLinks ?. classList.add("hidden");
userLinks ?. classList.remove("hidden");

mobileGuest ?. classList.add("hidden");
mobileUser ?. classList.remove("hidden");
} else {
guestLinks ?. classList.remove("hidden");
userLinks ?. classList.add("hidden");

mobileGuest ?. classList.remove("hidden");
mobileUser ?. classList.add("hidden");
}

// Mobile menu toggle
const menuToggle = document.getElementById("menu-toggle");
const mobileMenu = document.getElementById("mobile-menu");
if (menuToggle && mobileMenu) {
menuToggle.addEventListener("click", () => mobileMenu.classList.toggle("hidden"));
}
});
</script>
